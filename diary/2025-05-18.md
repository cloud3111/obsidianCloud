# 2025-05-18
今天进入最终复习


- seata全局事务的执行流程: 
	- TM向TC申请开启一个全局事务, 并返回一个全局事务的XID;
	- 随后RM也向TC申请开启独立的分支事务, 并将这个分支事务归入XID所属的全局事务;
	- 服务a开始执行分支事务, 并调用服务b;
	- 服务b也申请开启分支事务, 也归入所属的XID全局事务;
	- 服务b也开始分支事务;
	- 两个分支事务都执行完毕, TM会根据是否有异常向TC申请提交或者回滚
	- TC决定提交还是回滚
- AT模式核心:  利用业务操作前后的快照，自动生成**反向 SQL**来实现回滚；

- 三种限流算法: 
	- 计数器: 控制每秒的最大访问, 如果请求超了就把请求丢弃
	- 令牌桶: 以恒定速度生产令牌, 每次访问令牌减一, 没有令牌就限流
	- 漏桶: 控制每秒的最大访问, 如果请求超了就把请求放队列内等待处理, 超过队列最大容量或者超时就丢弃 
- 计数器：简单暴力；令牌桶：灵活应对突发；漏桶：严格平滑处理速率