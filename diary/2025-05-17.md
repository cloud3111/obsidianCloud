# 2025-05-17
进入是数据库和redis的复习

- where和having的区别: having是分组后再筛选, 且having后可以接聚合函数
- 如果只用用到了一个字段, 那么单列索引和联合索引谁的效率高? 单列索引通常会比联合索引更高效，但差别在大多数场景下非常小，可以忽略
- 多表的连接分为: 
	- 内连接: 隐式内连接(没有出现inner join字段, 通过a.id=b.id相连); 显示内连接 a
	- 外连接: 左外连接(在内连接的基础上保证左边表的数据全部显示)和右外连接(在内连接的基础上保证右边表的数据全部显示)
- 概括: 内连接是只返回两个表中 都匹配 的记录, 外连接是返回左表/右表的所有记录，右表/左表匹配不到的字段为 `NULL`。
- 三大范式: 
	- 第一范式: 保证每列数据不可再分, 保证原子性;  
	- 第二范式: 在第一范式基础上, 非主键字段完全依赖于主键(确保表中的每列都和主键相关)
	- 第三范式: 在第二范式基础上, 确保非主键字段只与一个主键相关, 不能依赖于其他非主键字段;
- vachar和char的区别: varchar是可变字符类型, 最多可以容纳 65535 个字符; 而char是固定长度的, 多出来的用空格填充
- blob用于存储音频视频等二进制文件; 而test适合存储文本文件: 评论,文章日志
- DateTime存储的是完整的日期格式, 与时区无关, 占用8个字节; 而timeStamp存储的是Unix时间戳, 与时区挂钩, 占用4个字节
- 如果表有索引，`COUNT(*)` 会直接用索引统计，而不是全表扫描，而 `COUNT(1)` 也会被 MySQL 优化为 `COUNT(*)`。
- 因为 emoji（😊）是 4 个字节的 UTF-8 字符，而 MySQL 的 utf8 字符集只支持最多 3 个字节的 UTF-8 字符，所以在 MySQL 中存储 emoji 时，需要使用 utf8mb4 字符集。
- sql执行顺序: from /  on / join / where / groupBy having / select distinct / orderBy limit
- 错误日志用于问题诊断，慢查询日志用于 SQL 性能分析，general log(一般日志) 用于记录所有的 SQL 语句，binlog 用于主从复制和数据恢复，redo log 用于保证事务持久性，undo log 用于事务回滚和 MVCC。
- 主键索引=唯一索引+非空。每个表只能有一个主键索引，但可以有多个唯一索引。
- 普通索引仅用于加速查询，不限制字段值的唯一性；适用于高频写入的字段、范围查询的字段
- 全文索引是 MySQL 一种优化文本数据检索的特殊类型索引，适用于 CHAR、VARCHAR 和 TEXT 等字段。
- **MySQL查询到底分不分组: 需要统计多人,多组,多类的，就分组；只查某个人/单条记录/某种条件的，用 WHERE+子查询**
- **常用的group by having avg(score) 就是 分组后筛选加聚合函数**

- 什么是ORM?  是一种解决关系型数据库与java对象映射问题的技术 Object Relational Mapping

- Redis是一个单线程的基于内存的线程安全的,可以进行IO多路复用的缓存中间件, 利用多路复用可以实现多个客户端socket的监听
- 想要最大程度利用 CPU，可以在一台机器上启动多个 Redis 实例的特点致使Redis是单线程的
- 缓存预热是指在系统启动时，提前将一些预定义的数据加载到缓存中，以避免在系统运行初期由于缓存未命中（cache miss）导致的性能问题。

- 正向代理和反向代理的区别
	- 正向代理是客户端的代理, 比如说vpn、内网穿透, 客户端不直接访问目标服务器，而是通过代理服务器转发请求
	- 反向代理是服务端的代理, 是由服务端设置一个反向代理服务器, 比如Nginx、CDN, 可以隐藏后端真实的ip地址
	- 正向代理 是多个客户端可以访问一个服务器后端
	- 反向代理 是一个客户端可以访问多个服务器后端